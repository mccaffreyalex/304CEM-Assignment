<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'
//---------------------------------------------------------------------
const restify = require('restify')
const index = require('./index')
const server = restify.createServer()
const handler = require('./modules/handler')
const defaultPort = 8080
const port = process.env.PORT || defaultPort
//---------------------------------------------------------------------


/**
*Respond function
*@param {string} res - HTTP response
*@param {string} next - next
*@param {string} status - status of response
*@param {string} data - data of response
*@param {string} http_code - HTTP reponse code of request
*@returns {string} response message
 */
function respond(res, next, status, data, http_code) {
    const response = {
        'status': status
        , 'data': data
    }

    res.setHeader('content-type', 'application/json')
    res.writeHead(http_code)
    res.end(JSON.stringify(response))
    return next()
}
exports.success = function success(res, next, data) {
    respond(res, next, 'success', data, index.status.ok)
}
exports.failure = function failure(res, next, data, http_code) {
    respond(res, next, 'failure', data, http_code)
}

//---------------------------------------------------------------------
server.use(restify.queryParser())
server.use(restify.bodyParser())
server.use(restify.acceptParser(server.acceptable))
server.use(restify.authorizationParser())
//---------------------------------------------------------------------
server.get('/', restify.serveStatic({
    'directory': './client',
    'default': 'index.html'
}))

server.get('/api', handler.search)
server.get('/user', handler.getUser)
server.post('/user', handler.addUser)
server.del('/user', handler.deleteUser)
server.put('/user', handler.updateUser)
server.get('/fav', handler.getFavPhotos)
server.post('/fav', handler.addFavPhoto)
server.del('/fav', handler.deleteFavPhotos)
//---------------------------------------------------------------------

server.listen(port, err => console.log(err || `Server running at: http://localhost:${port}`))


</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="Flickr.module_js%2520Module.html">js Module</a></li><li><a href="Weather.module_js%2520Module.html">js Module</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addFavPhoto">addFavPhoto</a></li><li><a href="global.html#addUser">addUser</a></li><li><a href="global.html#combinedData">combinedData</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#getFavPhotos">getFavPhotos</a></li><li><a href="global.html#log_rounds">log_rounds</a></li><li><a href="global.html#respond">respond</a></li><li><a href="global.html#search">search</a></li><li><a href="global.html#searchByID">searchByID</a></li><li><a href="global.html#searchByTag">searchByTag</a></li><li><a href="global.html#searchWeather">searchWeather</a></li><li><a href="global.html#updateUser">updateUser</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Mon Dec 12 2016 21:41:09 GMT+0000 (GMT Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
